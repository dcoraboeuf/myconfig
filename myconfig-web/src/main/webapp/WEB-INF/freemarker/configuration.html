<#include "/lib/layout.html">
<@layout_std pageId="configuration" style=false modules=["crud"]>
	<article class="configuration">
		<h1>${application.name?html}</h1>
		<section id="app-versions">
			<h1><@lh key="configuration.versions" /></h1>
			<@crud_table items = application.versionSummaryList errorKey = "version_error">
				<@crud_column property="name" key="model.version.name" />
				<@crud_column property="keyNumber" key="configuration.version.keyNumber" class="crud-number" />
				<@crud_create id="version" action="gui/version/create/${application.id}" label="configuration.version.new" />
				<@crud_delete action="gui/version/delete/${application.id}" field="name" promptKey="version.delete" />
			</@crud_table>
		</section>
		<section id="app-environments">
			<h1><@lh key="configuration.environments" /></h1>
			<@crud_table items = application.environmentSummaryList errorKey = "environment_error">
				<@crud_column property="name" key="model.environment.name" />
				<@crud_create id="environment" action="gui/environment/create/${application.id}" label="configuration.environment.new" />
				<@crud_delete action="gui/environment/delete/${application.id}" field="name" promptKey="environment.delete" />
			</@crud_table>
		</section>
		<section id="app-keys">
			<h1><@lh key="configuration.keys" /></h1>
			<@crud_table items = application.keySummaryList errorKey = "key_error">
				<@crud_column property="name" key="model.key.name" />
				<@crud_column property="description" key="model.key.description" />
				<@crud_column property="versionNumber" key="configuration.key.versionNumber" class="crud-number" />
				<@crud_delete action="gui/key/delete/${application.id}" field="name" promptKey="key.delete" />
				<@crud_general_action>
					<form class="crud" action="gui/key/create/${application.id}" method="post">
						<table>
							<tr>
								<td>
									<label for="key-name">
										<@lh key="model.key.name" />
									</label>
								</td>
								<td>
									<input id="key-name" name="name" maxlength="40" size="20" />
								</td>
								<td rowspan="2">
									<input id="key-submit" type="submit" value="<@lh key="configuration.key.new" />" />
								</td>
							</tr>
							<tr>
								<td>
									<label for="key-description">
										<@lh key="model.key.description" />
									</label>
								</td>
								<td>
									<textarea id="key-description" name="description" rows="2" cols="20"></textarea>
								</td>
							</tr>
						</table>
					</form> 
				</@crud_general_action>
			</@crud_table>
		</section>
	</article>
	<@layout_std_nav href="gui/" key="applications" />
</@layout_std>