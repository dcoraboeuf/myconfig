<#include "/lib/layout.html">
<@layout_std pageId="applications" style=false modules=["items"]>

	<@items_table id="applications" actions=true headers=[
				"model.application.id",
				"model.application.name",
				"applications.versionCount",
				"applications.keyCount",
				"applications.environmentCount",
				"applications.missingValuesCount"
			]>
		<@items items = applications ; item>
			<@item_column field="id" item=item />
			<@item_column field="name" item=item />
			<@item_column field="versionCount" item=item />
			<@item_column field="keyCount" item=item />
			<@item_column field="environmentCount" item=item />
			
			<#assign missingCount = item.configCount - item.valueCount />
			<td class="item-column item-column-missingValuesCount">
				${missingCount}
			</td>
			
			<@item_actions item=item>
				<@item_delete item=item action="gui/applications/delete" promptKey="application.delete" />
				<@item_edit action="gui/application/${item.id}" />
			</@item_actions>
			
		</@items>
		
		<@items_commands>
			<@item_create id="application-create" action="gui/applications/create" label="applications.new" />
		</@items_commands>
	</@items_table>

	<#--
	<table id="applications" class="items">
		<tfoot>
			<tr>
				<td colspan="7">
					<form action="gui/applications/create" method="post" onsubmit="return myconfig.validateTextAsName('#application-create-name')">
						<label>
							<@lh key="applications.new" />
							<input id="application-create-name" name="name" type="text" maxlength="80" size="20" autofocus="autofocus" />
							<input id="application-create-submit" type="submit" value="<@lh key='general.create' />" />
						</label>
					</form>
				</td>
			</tr>
			<#if .data_model["error"]??>
				<tr>
					<td colspan="7" class="error">
						${.data_model["error"]}
					</td>
				</tr>
			</#if>
		</tfoot>
	</table>
	-->
</@layout_std>