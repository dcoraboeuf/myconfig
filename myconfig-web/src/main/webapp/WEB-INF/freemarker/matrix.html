<#include "/lib/layout.html">
<@layout_std pageId="matrix" style=true modules=["key"] title=loc("matrix.title", configuration.name)>
	<article class="matrix">
		<table border="1">
			<thead>
				<tr>
					<th>
						<@lh key="matrix.key" />
					</th>
					<#list configuration.versionConfigurationList as versionConfiguration>
						<th>
							${versionConfiguration.name?html}
						</th>
					</#list>
				</tr>
			</thead>
			<tbody>
				<#list configuration.keyList as key>
					<tr>
						<td class="key">
							<div class="key-name">${key.name?html}</div>
							<div class="key-description">${key.description?html}</div>
						</td>
						<#list configuration.versionConfigurationList as versionConfiguration>
							<td class="key-flag">
								<#if versionConfiguration.keys?seq_contains(key.name)>
									<#assign setValue = "yes" />
								<#else>
									<#assign setValue = "no" />
								</#if>
								<#assign flag = versionConfiguration.keys?seq_contains(key.name) />
								<div
									id="matrix_${versionConfiguration.name?html}_${key.name?html}"
									application="${configuration.id?html}"
									version="${versionConfiguration.name?html}"
									key="${key.name?html}"
									set="${setValue}"
									class="matrix"
									title="<@lh key='matrix.key.${setValue}'/>"
									onclick="myconfig.keyVersion(this);" />
							</td>
						</#list>
					</tr>
				</#list>
			</tbody>
		</table>
		<section>
			<h1><@lh key="matrix.newKey" /></h1>
			<@key_create action="gui/matrix/${configuration.id}/key/create" />
		</section>
	</article>
	<@layout_std_nav href="gui/" key="applications" />
	<@layout_std_nav href="gui/application/${configuration.id}" key="configuration" />
</@layout_std>